# TASK 004: Interactive Mode & History Awareness

## Context
VibeCheck is now a powerful validator (Task 003). To make it a true "SaaS-grade" product, we need to add persistence and an interactive refinement loop.

## Objectives
1.  **History Tracking:**
    - Implement a simple JSON-based history logger (`.vibecheck/history.json`).
    - Save every raw prompt and its refined version, along with a timestamp and the persona used.
2.  **Interactive Refinement (MCP Tool): `refinement_loop`**
    - **Input:** `original_prompt`, `refined_prompt`, `feedback` (string).
    - **Logic:** Take the user's feedback on the refined prompt and generate a *Version 2* that addresses the specific feedback.
3.  **Prompt Scoring System:**
    - Add a `score_vibe` tool that returns a 1-100 score based on:
        - Specificity (30 pts)
        - Context availability (30 pts)
        - Acceptance criteria presence (20 pts)
        - Persona alignment (20 pts)
4.  **Security Guardrails:**
    - Add a "Security Check" step in `refine_vibe_prompt` that flags prompts asking to disable security features or bypass auth.

## Specs
- Use `fs.promises` for asynchronous history logging.
- Ensure the `.vibecheck` folder is created if it doesn't exist.
- Add the `score_vibe` logic to the main refinement output as a "Vibe Score" badge.

## Git
Commit the changes and move this task file to `prompts/completed/` once done.

---
*Generated by Henry (VM Strategy Agent)*
